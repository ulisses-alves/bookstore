angular.module("bookstore",["ngRoute","ngResource","ngAnimate","bookstore.core","bookstore.home","bookstore.book","bookstore.bookshelf"]).config(function($routeProvider){$routeProvider.when("/",{templateUrl:"templates/home.html",controller:"HomeCtrl"}).when("/book/:id",{templateUrl:"templates/book.html",controller:"BookCtrl"}).otherwise("/")}),angular.module("bookstore.book",[]).controller("BookCtrl",function($scope,$routeParams,Books){$scope.book=Books.get({id:$routeParams.id})}),angular.module("bookstore.bookshelf.controller",[]).controller("BookshelfCtrl",function(){}),angular.module("bookstore.bookshelf",["bookstore.bookshelf.controller"]).directive("bookshelf",function(){return{templateUrl:"templates/bookshelf.html",controller:"BookshelfCtrl",restrict:"E",scope:{books:"="}}}),angular.module("bookstore.core.books",[]).factory("Books",function($resource,settings){function createBookModel(book){var info=book.volumeInfo,images=info.imageLinks;return{id:book.id,thumbnail:images&&images.thumbnail,cover:images&&(images.large||images.medium||images.small||images.thumbnail),title:info.title,description:info.description,authors:info.authors}}return $resource(settings.api,{id:"@id"},{query:{method:"GET",isArray:!0,params:{maxResults:40,q:"."},transformResponse:function(data){return angular.fromJson(data).items.map(createBookModel)}},get:{method:"GET",transformResponse:function(data){return createBookModel(angular.fromJson(data))}}},{cancellable:!0})}),angular.module("bookstore.core",["bookstore.core.truncate","bookstore.core.books","bookstore.core.settings"]),angular.module("bookstore.core.settings",[]).constant("settings",{api:"https://www.googleapis.com/books/v1/volumes/:id"}),angular.module("bookstore.core.truncate",[]).filter("truncate",function(){return function(input,length){return input.length>length?input.substring(0,length)+"...":input}}),angular.module("bookstore.home",[]).controller("HomeCtrl",function($scope,Books){$scope.books=Books.query(),$scope.search=function(){$scope.books.$cancelRequest(),$scope.books=Books.query({q:$scope.searchText||"."})}});
//# sourceMappingURL=bookstore.min.js.map
